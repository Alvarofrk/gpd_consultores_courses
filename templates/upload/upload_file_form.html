    {% extends 'base.html' %}
    {% load i18n %}
    {% block title %}{{ title }} | {% trans 'Sistema de gestión de aprendizaje' %}{% endblock title %}
    {% load crispy_forms_tags %}

    {% block content %}

    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">{% trans 'Inicio' %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'programs' %}">{% trans 'Programas' %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'program_detail' course.program.id %}">{{ course.program }}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'course_detail' course.slug %}">{{ course }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{% trans 'Subida de archivo' %}</li>
        </ol>
    </nav>
        
    <p class="title-1">{% trans 'Subida de archivo para' %} {{ course|truncatechars:25 }}</p>
    <br><br>

    {% include 'snippets/messages.html' %}

    <div class="row">
        <div class="col-md-8 p-0 mx-auto">
            <div class="card">
                <p class="form-title">{% trans 'Formulario de subida de archivo' %}</p>

                <div class="card-body">
                    <form action="" method="POST" enctype="multipart/form-data">{% csrf_token %}
                        <!-- Tipo de subida (solo URL) -->
                        <div class="form-group mb-4">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Subida de documentos:</strong> Solo se permite el uso de enlaces externos (Google Drive, Dropbox, etc.)
                            </div>
                            <!-- Campo oculto para mantener compatibilidad -->
                            <input type="hidden" name="upload_type" value="url">
                        </div>

                        <!-- Título -->
                        <div class="form-group mb-3">
                            <label for="{{ form.title.id_for_label }}" class="form-label">Título del archivo:</label>
                            {{ form.title }}
                            {% if form.title.errors %}
                                <div class="text-danger">{{ form.title.errors }}</div>
                            {% endif %}
                        </div>

                        <!-- Campo de URL (única opción disponible) -->
                        <div class="form-group mb-3">
                            <label for="{{ form.external_url.id_for_label }}" class="form-label">
                                <i class="fas fa-link me-2"></i>URL externa del documento:
                            </label>
                            {{ form.external_url }}
                            {% if form.external_url.errors %}
                                <div class="text-danger">{{ form.external_url.errors }}</div>
                            {% endif %}
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>
                                <strong>Google Drive:</strong> Usa el enlace de "Vista previa" o "Compartir"<br>
                                <strong>Dropbox:</strong> Usa el enlace de "Compartir"<br>
                                <strong>Otros:</strong> Cualquier enlace directo al archivo
                            </div>
                        </div>

                        <!-- Errores generales -->
                        {% if form.non_field_errors %}
                            <div class="alert alert-danger">
                                {{ form.non_field_errors }}
                            </div>
                        {% endif %}
                        
                        <div class="form-group">
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-save me-2"></i>{% trans 'Subir' %}
                            </button>
                            <a class="btn btn-danger" href="{% url 'course_detail' course.slug %}" style="float: right;">
                                <i class="fas fa-times me-2"></i>{% trans 'Cancelar' %}
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
    // JavaScript simplificado ya que solo se usa URL externa
    document.addEventListener('DOMContentLoaded', function() {
        // Asegurar que el campo de archivo esté vacío
        const fileInput = document.querySelector('input[name="file"]');
        if (fileInput) {
            fileInput.value = '';
        }
        
        // Enfocar el campo de URL
        const urlInput = document.querySelector('input[name="external_url"]');
        if (urlInput) {
            urlInput.focus();
        }
    });
    </script>

    {% endblock content %}